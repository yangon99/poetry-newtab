# 诗词新标签页浏览器插件

## 功能特色
- 🎨 **简洁设计**：纯白背景，简约优雅的 UI 设计
- 📖 **诗词展示**：替换浏览器默认新建标签页，展示来自 [jinrishici.com](https://www.jinrishici.com/) 的诗词
- 📚 **历史记录**：自动保存最近10条诗词，支持快速回看和重新展示
- 🔄 **智能刷新**：支持点击刷新按钮或按 R/空格键换一首诗词
- ⚡ **打字机效果**：诗词内容以优雅的打字机效果呈现
- 🛡️ **容错机制**：网络失败时显示精选备用诗词
- 🔑 **官方Token**：自动获取今日诗词官方Token，享受稳定API服务
- 📱 **响应式**：完美适配桌面端和移动端
- 🌐 **跨浏览器**：支持 Chrome 和 Firefox（Manifest V3）

## 安装与使用

### Chrome 安装
1. 打开 Chrome 浏览器，访问 `chrome://extensions/`
2. 开启右上角的"开发者模式"
3. 点击"加载已解压的扩展程序"并选择本项目文件夹
4. 新建标签页即可看到诗词

### Firefox 安装  
1. 打开 Firefox 浏览器，访问 `about:debugging`
2. 点击"此 Firefox"
3. 点击"临时载入附加组件"并选择项目中的 `manifest.json` 文件
4. 新建标签页即可看到诗词

## 快捷键
- `R` 键：刷新获取新诗词
- `空格键`：刷新获取新诗词
- `H` 键：打开/关闭历史记录面板
- `↑` 键：彩蛋效果

## 技术特性
- **官方SDK**：使用今日诗词官方浏览器SDK，稳定可靠
- **智能推荐**：根据时间、地点、天气等信息智能推荐诗词
- **简约设计**：纯白背景，现代化布局和交互
- **本地存储**：使用 localStorage 保存历史记录
- **ES6+ JavaScript**：类语法、async/await、SDK集成
- **用户体验**：加载动画、错误处理、键盘交互
- **性能优化**：字体预加载、SDK异步加载
- **安全性**：内容安全策略（CSP）配置

## API说明
插件使用今日诗词官方浏览器SDK：
- **官方SDK**：`https://sdk.jinrishici.com/v2/browser/jinrishici.js`
- **智能推荐**：SDK自动处理Token获取和管理
- **高级功能**：根据地理位置、时间、天气等智能推荐
- **稳定性**：官方维护，享受最佳的API服务质量

SDK会自动处理所有底层逻辑，包括Token获取、缓存管理、错误处理等。

## 文件说明
- `manifest.json`：插件配置文件，兼容 Chrome/Firefox 最新标准
- `newtab.html`：新标签页 HTML 结构，集成官方SDK
- `newtab.js`：核心逻辑，包含SDK调用、历史记录和 UI 交互
- `newtab.css`：样式文件，现代化 UI 设计
- `icon*.png`：插件图标（占位符，可自行替换）

## 开发调试
- 修改 HTML/JS/CSS 文件后，在扩展管理页面点击刷新图标
- 打开新标签页查看效果
- 可通过浏览器开发者工具调试

## 自定义
- 可修改 `newtab.css` 中的颜色主题
- 可在 `newtab.js` 中添加更多备用诗词
- 可调整打字机效果的速度
- 可修改历史记录保存数量（默认10条）

## License
MIT

## 更新日志
### v1.3.0 (最新)
- ✅ 集成今日诗词官方浏览器SDK
- ✅ 移除手动Token管理，SDK自动处理
- ✅ 享受官方智能推荐算法
- ✅ 优化CSP策略，支持SDK加载
- ✅ 提升稳定性和推荐质量

### v1.2.0
- ✅ 实现官方Token自动获取和管理
- ✅ 使用新的API接口 `/sentence`
- ✅ 支持Token失效时自动重新获取
- ✅ 优化API调用流程和错误处理

### v1.1.0
- ✅ 改为纯白背景设计
- ✅ 新增历史记录功能（保存最近10条）
- ✅ 支持点击历史记录重新展示
- ✅ 新增 H 键快捷键打开历史面板
- ✅ 优化视觉设计和交互体验

### v1.0.0
- ✅ 基础诗词展示功能
- ✅ 现代化 UI 设计
- ✅ 打字机动画效果
- ✅ 智能错误处理
- ✅ 响应式设计
- ✅ 键盘快捷键支持
